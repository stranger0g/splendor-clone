<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Splendor Clone</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="setup-screen" class="active">
        <h1>Splendor Setup</h1>

        <label for="player-count">Number of Players:</label>
        <select id="player-count">
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4" selected>4</option>
        </select>

        <label for="timer-input">Turn Timer (minutes, 0 = off):</label>
        <input type="number" id="timer-input" value="1.5" min="0" step="0.5">

        <div id="player-names">
            <!-- Input fields will be generated here -->
        </div>
        <button id="start-game-btn">Start Game</button>
    </div>

    <div id="game-container" class="hidden">
        <div id="game-board">
            <div id="top-bar">
                <div id="nobles-area">
                    <h2>Nobles</h2>
                    <div class="nobles-container">
                        <!-- Nobles will be rendered here -->
                    </div>
                </div>
                <div id="timer-area">
                    <h2>Turn Timer</h2>
                    <div id="timer-display">--:--</div>
                </div>
                <div id="game-status">
                    <h2>Game Log</h2>
                    <div id="log-messages">
                        <!-- Game messages will appear here -->
                    </div>
                     <button id="end-turn-early-btn" class="hidden">End Turn</button>
                     <button id="dark-mode-toggle" title="Toggle Dark Mode">ðŸŒ™</button> <!-- Add this button -->
                </div>
            </div>

            <div id="main-area">
                <div id="bank-area">
                    <h2>Gem Bank</h2>
                    <div id="gem-bank" class="gems-container">
                        <!-- Gems will be rendered here -->
                    </div>
                     <!-- Static action buttons removed -->
                     <div id="selection-info">
                        <p>Selected Gems: <span id="selected-gems-display">None</span></p>
                        <p>Selected Card: <span id="selected-card-display">None</span></p>
                         <!-- Container for dynamic action buttons -->
                         <div id="dynamic-action-buttons" style="margin-top: 8px;">
                             <!-- Buttons like "Confirm Take Gems", "Purchase Card", "Reserve Card" will appear here -->
                         </div>
                         <!-- Keep Cancel button static but initially hidden -->
                        <button id="cancel-action-btn" class="hidden" style="margin-top: 5px;">Cancel Selection</button>
                    </div>
                </div>

                <div id="cards-area">
                    <div class="card-level-row" id="level-3-row">
                        <h3>Level 3</h3>
                        <div class="deck" id="deck-3">Deck (<span id="deck-3-count">0</span>)</div>
                        <div class="visible-cards" id="visible-cards-3">
                             <!-- Level 3 cards -->
                        </div>
                    </div>
                     <div class="card-level-row" id="level-2-row">
                        <h3>Level 2</h3>
                        <div class="deck" id="deck-2">Deck (<span id="deck-2-count">0</span>)</div>
                        <div class="visible-cards" id="visible-cards-2">
                             <!-- Level 2 cards -->
                        </div>
                    </div>
                     <div class="card-level-row" id="level-1-row">
                        <h3>Level 1</h3>
                        <div class="deck" id="deck-1">Deck (<span id="deck-1-count">0</span>)</div>
                        <div class="visible-cards" id="visible-cards-1">
                             <!-- Level 1 cards -->
                        </div>
                    </div>
                </div>
            </div>

            <div id="players-area">
                <!-- Player areas will be rendered here -->
            </div>
        </div>

        <!-- Modals / Overlays -->
        <div id="return-gems-overlay" class="hidden">
            <div class="modal-content">
                <h2>Return Gems</h2>
                <p>You have too many gems (<span id="return-gems-count">0</span>/10). Please select gems to return.</p>
                <div id="return-gems-player-display" class="gems-container small-gems"></div>
                <div id="return-gems-selection-display">Selected to return: </div>
                <button id="confirm-return-gems-btn" disabled>Confirm Return</button>
            </div>
        </div>

         <div id="game-over-overlay" class="hidden">
            <div class="modal-content">
                <h2>Game Over!</h2>
                <div id="final-scores">
                    <!-- Final scores will be displayed here -->
                </div>
                <button id="play-again-btn">Play Again</button>
            </div>
        </div>

        <div id="noble-choice-overlay" class="hidden">
            <div class="modal-content">
                <h2>Choose Your Noble</h2>
                <p>You qualify for multiple nobles. Please select one to visit:</p>
                <div id="noble-choice-options" class="nobles-container">
                    <!-- Eligible nobles will be rendered here -->
                </div>
                <!-- No cancel button needed, choice is mandatory -->
            </div>
        </div>
        <!-- End Modals -->

    </div>

    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>